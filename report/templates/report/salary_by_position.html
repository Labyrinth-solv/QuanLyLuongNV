{% extends "base_admin.html" %}

{% block extra_css %}
<style>
    .report-container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    h2 {
        color: #007bff;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 20px;
    }
    .button-group {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }
    .btn-secondary:hover {
        background-color: #545b62;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }
    th {
        background-color: #007bff;
        color: white;
        font-weight: bold;
    }
    tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    tr:hover {
        background-color: #f0f0f0;
    }
    .text-right {
        text-align: right;
    }
    .highlight {
        background-color: #fff3cd;
        font-weight: bold;
    }
    .alert {
        padding: 15px;
        background-color: #d1ecf1;
        border: 1px solid #bee5eb;
        border-radius: 4px;
        color: #0c5460;
    }
</style>
{% endblock extra_css %}

{% block admin_content %}

<h1>üìä B√°o C√°o Th·ªëng K√™ L∆∞∆°ng Nh√¢n Vi√™n</h1>

<div class="button-group">
    <a href="{% url 'report:admin_reports' %}" class="btn btn-secondary"> ‚Üê Quay l·∫°i B√°o C√°o </a>
</div> 

{% if salary_stats %} 
<table> 
    <thead> 
        <tr> 
            <th>Ch·ª©c V·ª•</th> 
            <th class="text-right">S·ªë Nh√¢n Vi√™n</th> 
            <th class="text-right">L∆∞∆°ng C∆° B·∫£n</th> 
            <th class="text-right">H·ªá S·ªë</th> 
            <th class="text-right">T·ªïng L∆∞∆°ng theo ch·ª©c v·ª•</th> 
        </tr> 
    </thead> 
    <tbody> 
        {% for stat in salary_stats %} 
        <tr> 
            <td><strong>{{ stat.chuc_vu }}</strong></td> 
            <td class="text-right">{{ stat.so_nhan_vien }}</td> 
            <td class="text-right">{{ stat.luong_co_ban|floatformat:0 }} VNƒê</td> 
            <td class="text-right">{{ stat.he_so }}</td> 
            <td class="text-right highlight"> 
                {% if stat.tong_luong %} 
                {{ stat.tong_luong|floatformat:0 }} 
                VNƒê 
                {% else %} 
                0 VNƒê 
                {% endif %} 
            </td> 
        </tr> 
        {% endfor %} 
    </tbody>
</table> 
{% else %} 
<div class="alert"> ‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu th·ªëng k√™ l∆∞∆°ng. </div> 
{% endif %}

{% if total_stats %}
<h3>T·ªïng K·∫øt Chung</h3>
<table>
    <thead>
        <tr>
            <th class="text-right">T·ªïng S·ªë Nh√¢n Vi√™n</th>
            <th class="text-right">T·ªïng L∆∞∆°ng</th>
            <th class="text-right">L∆∞∆°ng Trung B√¨nh</th>
            <th class="text-right">L∆∞∆°ng T·ªëi ƒêa</th>
            <th class="text-right">L∆∞∆°ng T·ªëi Thi·ªÉu</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="text-right">{{ total_stats.tong_nhan_vien }}</td>
            <td class="text-right">{{ total_stats.tong_luong|floatformat:0 }} VNƒê</td>
            <td class="text-right">{{ total_stats.trung_binh_luong|floatformat:0 }} VNƒê</td>
            <td class="text-right">{{ total_stats.luong_lon_nhat|floatformat:0 }} VNƒê</td>
            <td class="text-right">{{ total_stats.luong_nho_nhat|floatformat:0 }} VNƒê</td>
        </tr>
    </tbody>
</table>
{% endif %}

{% endblock admin_content %}